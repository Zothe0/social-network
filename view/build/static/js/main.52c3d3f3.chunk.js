(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{147:function(e,t,a){e.exports=a(273)},156:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){},164:function(e,t){},166:function(e,t){},180:function(e,t){},182:function(e,t){},210:function(e,t){},212:function(e,t){},213:function(e,t){},219:function(e,t){},221:function(e,t){},239:function(e,t){},241:function(e,t){},253:function(e,t){},256:function(e,t){},273:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(54),s=a.n(c),o=a(10),u=a(24),l=a(143),i=a(144),m=a(146),f=a(11),p=(a(156),a(157),a(158),a(12)),d=a(5),b=a.n(d),_=a(15),E="/model/static/images/pages";function O(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"header__container container"},r.a.createElement(f.b,{to:"/",className:"header__mini-logo"},r.a.createElement("img",{src:E+"/minilogo.svg",alt:"\u043c\u0438\u043d\u0438\u043b\u043e\u0433\u043e"})),r.a.createElement(f.b,{to:"/",className:"header__logo"},r.a.createElement("img",{src:E+"/logo.svg",alt:"\u043b\u043e\u0433\u043e"})))))}function v(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"auth-footer"},r.a.createElement("div",{className:"auth-footer__container container"},r.a.createElement(f.b,{to:"/",className:"auth-footer__link"},"memegram 2020"),r.a.createElement(f.b,{to:"/",className:"auth-footer__link"},"\u041e \u043d\u0430\u0441"),r.a.createElement(f.b,{to:"/",className:"auth-footer__link"},"\u0412\u0430\u043a\u0430\u043d\u0441\u0438\u0438"),r.a.createElement(f.b,{to:"/",className:"auth-footer__link"},"\u041f\u0440\u0430\u0432\u0438\u043b\u0430"),r.a.createElement(f.b,{to:"/",className:"auth-footer__link"},"\u041a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c"))))}var h=function(e,t){return{type:"CHANGE_INPUT",name:e,value:t}},N=function(e){return{type:"CLEAR_INPUT",name:e}},j=function(e){return function(){var t=Object(_.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"SET_MESSAGE",message:e}),setTimeout((function(){return a(g())}),3e3);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},g=function(){return{type:"CLEAR_MESSAGE"}},k=function(e){return function(){var t=Object(_.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"SET_ON_WARNING",name:e}),setTimeout((function(){return a(w(e))}),3e3);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},w=function(e){return{type:"SET_OFF_WARNING",name:e}},y=function(e,t){return function(){var a=Object(_.a)(b.a.mark((function a(n,r){return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return localStorage.getItem("userData")||localStorage.setItem("userData",JSON.stringify({token:e,nickName:t})),a.next=3,n({type:"LOGIN_USER",token:e,nickName:t});case 3:r().authReducer.token&&n({type:"IS_AUTH_TRUE"});case 5:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},x=function(){return function(){var e=Object(_.a)(b.a.mark((function e(t,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.removeItem("userData"),e.next=3,t({type:"LOGOUT_USER"});case 3:a().authReducer.token||t({type:"IS_AUTH_FALSE"});case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()};function A(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.authReducer})),a=Object(n.useRef)(null),c=Object(n.useRef)(null),s=Object(n.useRef)(null),u=function(){var t=Object(_.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e({type:"CLEAR_ALL_INPUTS"}),e(g());case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),l=function(){var a=Object(_.a)(b.a.mark((function a(n){var r;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n.preventDefault(),r={nickName:t.formInputs.nickName,password:t.formInputs.password},e({type:"LOGIN",body:r});case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),i=function(){var t=Object(_.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(h(a.target.name,a.target.value));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=Object(n.useCallback)((function(){return""!==t.formInputs.nickName&&""!==t.formInputs.password}),[t.formInputs.nickName,t.formInputs.password]);return Object(n.useEffect)((function(){m()?(e({type:"SET_SUBMIT_ENABLED"}),s.current.classList.add("active")):(e({type:"SET_SUBMIT_DISABLED"}),s.current.classList.remove("active"))}),[t.formInputs,m,e]),Object(n.useEffect)((function(){var t=JSON.parse(localStorage.getItem("userData"));t&&t.token&&e(y(t.token,t.nickName))}),[e]),Object(n.useEffect)((function(){switch(t.responseMessage){case"\u0422\u0430\u043a\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442":a.current.setAttribute("placeholder","".concat(t.responseMessage)),a.current.classList.add("warning");break;case"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c":c.current.setAttribute("placeholder","".concat(t.responseMessage)),c.current.classList.add("warning");break;default:a.current.setAttribute("placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0438\u043a"),a.current.classList.remove("warning"),c.current.setAttribute("placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"),c.current.classList.remove("warning")}}),[t.responseMessage]),r.a.createElement(r.a.Fragment,null,r.a.createElement("title",null,"\u0412\u0445\u043e\u0434"),r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"auth"},r.a.createElement(O,null),r.a.createElement("div",{className:"auth__container container"},r.a.createElement("div",{className:"auth__body"},r.a.createElement("img",{className:"auth__body-image",src:E+"/auth-picture.svg",alt:"\u041a\u0443\u0447\u0430 \u043b\u044e\u0434\u0435\u0439"}),r.a.createElement("div",{className:"auth__fields"},r.a.createElement("form",{className:"auth__form"},r.a.createElement("div",{className:"auth__header"},"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),"\u041e\u0448\u0438\u0431\u043a\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435"===t.responseMessage?r.a.createElement("div",null,t.responseMessage):null,r.a.createElement("input",{className:"auth__input",ref:a,type:"text",name:"nickName",onChange:i,autoComplete:"off",value:t.formInputs.nickName,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0438\u043a \u0438\u043b\u0438 \u043f\u043e\u0447\u0442\u0443"}),r.a.createElement("input",{className:"auth__input",ref:c,type:"password",name:"password",onChange:i,autoComplete:"off",value:t.formInputs.password,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"}),r.a.createElement("div",{className:"auth__buttons"},r.a.createElement("button",{className:"auth__button",ref:s,type:"submit",onClick:l,disabled:t.submitButton},"\u0412\u043e\u0439\u0442\u0438"),r.a.createElement(f.b,{to:"/registration",className:"auth__button reg",onClick:u},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")))))),r.a.createElement(v,null))))}var S=function(e){return{type:"UPDATE_POST_LIST",payload:e}},T=a(45),L=a(30),I=a(145);function R(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.authReducer.token})),a=Object(n.useCallback)((function(){e(x()),e(j("\u0412\u0440\u0435\u043c\u044f \u0441\u0435\u0441\u0441\u0438\u0438 \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b\u043e\u0441\u044c"))}),[e]);return Object(n.useCallback)((function(){try{return Object(I.verify)(t,"b4KFHX6b3"),!1}catch(e){return a(),!0}}),[t,a])}var P=function(){for(var e=document.querySelectorAll(".ibg"),t=0;t<e.length;t++)e[t].querySelector("img")&&(e[t].style.backgroundImage="url("+e[t].querySelector("img").getAttribute("src")+")")};function U(e){var t=e.post,a=e.currentTime;P();var c=Math.floor(a/1e3),s=new Date(a).getDate(),u=new Date(a).getMonth(),l=new Date(a).getFullYear(),i=Math.floor(t.date/1e3),m=new Date(t.date).getMinutes(),p=new Date(t.date).getHours(),d=new Date(t.date).getDate(),b=new Date(t.date).getMonth(),_=new Date(t.date).getFullYear(),E=Object(o.b)(),O=Object(o.c)((function(e){return e.authReducer.nickName})),v=Object(n.useState)(null),h=Object(L.a)(v,2),N=h[0],j=h[1],g=R(),k="/profile/".concat(t.author),w=Object(n.useState)(t.likes),y=Object(L.a)(w,2),x=y[0],A=y[1],S=Object(n.useState)(x.includes(O)),I=Object(L.a)(S,2),U=I[0],C=I[1],M=Object(n.useState)(0),D=Object(L.a)(M,2),F=D[0],G=D[1],B=Object(n.useRef)(null),H=Object(n.useCallback)((function(e){if(g()||t.author===O)j("\u041d\u0435\u043b\u044c\u0437\u044f \u043b\u0430\u0439\u043a\u0430\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u043e\u0441\u0442\u044b"),setTimeout((function(){return j(null)}),1700);else if(U)A((function(e){return e.filter((function(e){return e!==O}))}));else{var a=Object(T.a)(x);a.push(O),A(a)}}),[g,U,x,O,t.author]),W=function(){j("\u042d\u0442\u0430 \u043a\u043d\u043e\u043f\u043a\u0430 \u043f\u043e\u043a\u0430 \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442"),setTimeout((function(){return j(null)}),1700)};return Object(n.useEffect)((function(){N?B.current.classList.add("warning"):B.current.classList.remove("warning")}),[N]),Object(n.useEffect)((function(){F>0&&(E({type:"LIKE_CHANGING",postId:t._id,newLikes:x}),C((function(e){return!e}))),G((function(e){return e+1}))}),[E,t._id,x]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{ref:B,className:"posts-body__post"},r.a.createElement("div",{className:"posts-body__header"},r.a.createElement("div",{className:"posts-body__info"},r.a.createElement(f.b,{to:k,className:"posts-body__avatar ibg"},r.a.createElement("img",{src:t.avatarUrl,alt:"\u0430\u0432\u0430\u0442\u0430\u0440\u043a\u0430"})),r.a.createElement("div",{className:"posts-body__info-column"},r.a.createElement(f.b,{to:k,className:"posts-body__author"},t.author),r.a.createElement("span",{className:"posts-body__date"},function(e){if(e<=10)return"\u0442\u043e\u043b\u044c\u043a\u043e \u0447\u0442\u043e";if(e<20)return"".concat(e," \u0441\u0435\u043a\u0443\u043d\u0434 \u043d\u0430\u0437\u0430\u0434");if(e<59&&e%10===1)return"".concat(e," \u0441\u0435\u043a\u0443\u043d\u0434\u0443 \u043d\u0430\u0437\u0430\u0434");if(e<59&&(e%10===2||e%10===3||e%10===4))return"".concat(e," \u0441\u0435\u043a\u0443\u043d\u0434\u044b \u043d\u0430\u0437\u0430\u0434");if(e<59)return"".concat(e," \u0441\u0435\u043a\u0443\u043d\u0434 \u043d\u0430\u0437\u0430\u0434");if(e<119)return"\u043c\u0438\u043d\u0443\u0442\u0443 \u043d\u0430\u0437\u0430\u0434";if(e<179)return"\u0434\u0432\u0435 \u043c\u0438\u043d\u0443\u0442\u044b \u043d\u0430\u0437\u0430\u0434";if(e<239)return"\u0442\u0440\u0438 \u043c\u0438\u043d\u0443\u0442\u044b \u043d\u0430\u0437\u0430\u0434";if(e<299)return"4 \u043c\u0438\u043d\u0443\u0442\u044b \u043d\u0430\u0437\u0430\u0434";if(Math.floor(e/60)<20)return"".concat(Math.floor(e/60)," \u043c\u0438\u043d\u0443\u0442 \u043d\u0430\u0437\u0430\u0434");if(Math.floor(e/60)<59&&Math.floor(e/60)%10===1)return"".concat(Math.floor(e/60)," \u043c\u0438\u043d\u0443\u0442y \u043d\u0430\u0437\u0430\u0434");if(Math.floor(e/60)<59&&(Math.floor(e/60)%10===2||Math.floor(e/60)%10===3||Math.floor(e/60)%10===4))return"".concat(Math.floor(e/60)," \u043c\u0438\u043d\u0443\u0442\u044b \u043d\u0430\u0437\u0430\u0434");if(Math.floor(e/60)<59)return"".concat(Math.floor(e/60)," \u043c\u0438\u043d\u0443\u0442 \u043d\u0430\u0437\u0430\u0434");if(Math.floor(e/60)<119)return"\u0447\u0430\u0441 \u043d\u0430\u0437\u0430\u0434";if(Math.floor(e/60)<179)return"\u0434\u0432\u0430 \u0447\u0430\u0441\u0430 \u043d\u0430\u0437\u0430\u0434";if(Math.floor(e/60)<239)return"\u0442\u0440\u0438 \u0447\u0430\u0441\u0430 \u043d\u0430\u0437\u0430\u0434";if(s===d&&u===b&&l===_){var t=m<10?"0".concat(m):m;return"\u0441\u0435\u0433\u043e\u0434\u043d\u044f \u0432 ".concat(p,":").concat(t)}if(s===d+1&&u===b&&l===_||d>s&&(u===b+1&&l===_||b-u===11&&l-_===1)){var a=m<10?"0".concat(m):m;return"\u0432\u0447\u0435\u0440\u0430 \u0432 ".concat(p,":").concat(a)}if(l===_){var n=m<10?"0".concat(m):m;switch(b){case 0:return"".concat(d," \u044f\u043d\u0432 \u0432 ").concat(p,":").concat(n);case 1:return"".concat(d," \u0444\u0435\u0432 \u0432 ").concat(p,":").concat(n);case 2:return"".concat(d," \u043c\u0430\u0440 \u0432 ").concat(p,":").concat(n);case 3:return"".concat(d," \u0430\u043f\u0440 \u0432 ").concat(p,":").concat(n);case 4:return"".concat(d," \u043c\u0430\u044f \u0432 ").concat(p,":").concat(n);case 5:return"".concat(d," \u0438\u044e\u043d \u0432 ").concat(p,":").concat(n);case 6:return"".concat(d," \u0438\u044e\u043b \u0432 ").concat(p,":").concat(n);case 7:return"".concat(d," \u0430\u0432\u0433 \u0432 ").concat(p,":").concat(n);case 8:return"".concat(d," \u0441\u0435\u043d \u0432 ").concat(p,":").concat(n);case 9:return"".concat(d," \u043e\u043a\u0442 \u0432 ").concat(p,":").concat(n);case 10:return"".concat(d," \u043d\u043e\u044f \u0432 ").concat(p,":").concat(n);case 11:return"".concat(d," \u0434\u0435\u043a \u0432 ").concat(p,":").concat(n);default:return"\u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043c\u0435\u0441\u044f\u0446"}}else if(l>_)switch(b){case 0:return"".concat(d," \u044f\u043d\u0432 ").concat(_);case 1:return"".concat(d," \u0444\u0435\u0432 ").concat(_);case 2:return"".concat(d," \u043c\u0430\u0440 ").concat(_);case 3:return"".concat(d," \u0430\u043f\u0440 ").concat(_);case 4:return"".concat(d," \u043c\u0430\u044f ").concat(_);case 5:return"".concat(d," \u0438\u044e\u043d ").concat(_);case 6:return"".concat(d," \u0438\u044e\u043b ").concat(_);case 7:return"".concat(d," \u0430\u0432\u0433 ").concat(_);case 8:return"".concat(d," \u0441\u0435\u043d ").concat(_);case 9:return"".concat(d," \u043e\u043a\u0442 ").concat(_);case 10:return"".concat(d," \u043d\u043e\u044f ").concat(_);case 11:return"".concat(d," \u0434\u0435\u043a ").concat(_);default:return"\u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043c\u0435\u0441\u044f\u0446"}return"\u041d\u0435\u0432\u0435\u0440\u043d\u0430\u044f \u0434\u0430\u0442\u0430"}(c-i)))),N?r.a.createElement("div",{className:"posts-body__warning"},N):null,r.a.createElement("i",{className:"posts-body__frame fas fa-reply",onClick:W})),r.a.createElement("div",{className:"posts-body__content"},r.a.createElement("div",{className:"posts-body__text"},t.text),r.a.createElement("div",{className:"posts-body__image"})),r.a.createElement("div",{className:"posts-body__footer"},r.a.createElement("div",{className:"posts-body__stat"},U?r.a.createElement("i",{onClick:H,className:"posts-body__frame fas fa-heart"}):r.a.createElement("i",{onClick:H,className:"posts-body__frame far fa-heart"})," ",x.length),r.a.createElement("div",{className:"posts-body__stat"},r.a.createElement("i",{className:"posts-body__frame far fa-comment-alt",onClick:W}),"0"),r.a.createElement("div",{className:"posts-body__stat"},r.a.createElement("i",{className:"posts-body__frame fas fa-share",onClick:W})," ","0"),r.a.createElement("div",{className:"posts-body__stat"},r.a.createElement("i",{className:"posts-body__frame views far fa-eye"}),t.views.length))))}function C(e){var t=e.uploadedPosts;return r.a.createElement("div",null,t.map((function(e){return r.a.createElement(U,{post:e,currentTime:Date.now(),key:e._id})})))}function M(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.authReducer.nickName})),a=Object(o.c)((function(e){return e.authReducer.avatarUrl})),c="/profile/".concat(t),s=Object(n.useRef)(null),u=Object(n.useRef)(null);return Object(n.useEffect)((function(){window.addEventListener("click",(function(e){e.target&&s.current&&e.target!==u.current&&e.target.parentNode!==u.current&&s.current.classList.add("covert")}))}),[]),Object(n.useEffect)((function(){P()}),[a]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"header__container container"},r.a.createElement(f.b,{to:"/",className:"header__mini-logo"},r.a.createElement("img",{src:E+"/minilogo.svg",alt:"\u043c\u0438\u043d\u0438\u043b\u043e\u0433\u043e"})),r.a.createElement("form",{className:"header__form"},r.a.createElement("input",{className:"header__search",id:"search",type:"search",placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e\u0441\u0442\u043e\u0432...",autoComplete:"off",disabled:"disabled"}),r.a.createElement("i",{className:"header__search-btn fas fa-search"})),r.a.createElement("div",{className:"header__menu",onClick:function(){s.current.classList.toggle("covert")},ref:u},r.a.createElement("span",null,"\u041c\u0435\u043d\u044e"),r.a.createElement("i",{className:"fas fa-bars"}),r.a.createElement("div",{className:"header__additional-menu additional-menu covert",ref:s},r.a.createElement(f.b,{to:c,className:"additional-menu__link"},r.a.createElement("div",null,"\u0410\u043a\u043a\u0430\u0443\u043d\u0442"),r.a.createElement("div",{className:"additional-menu__avatar ibg"},r.a.createElement("img",{src:a,alt:"\u0430\u0432\u0430\u0442\u0430\u0440\u043a\u0430"}))),r.a.createElement("a",{className:"additional-menu__link",href:"https://github.com/Zothe0/social-network"},"\u0418\u0441\u0445\u043e\u0434\u043d\u0438\u043a\u0438"),r.a.createElement("div",{onClick:function(){e(x())},className:"additional-menu__link"},"\u0412\u044b\u0439\u0442\u0438"))))))}function D(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.authReducer})),a=Object(o.c)((function(e){return e.postsReducer})),c=R(),s=Object(n.useRef)(null),u=Object(n.useRef)(null),l=window.pageYOffset,i=function(t){t.preventDefault(),c()||""===a.postField?e(j("\u041f\u043e\u0441\u0442 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c")):(e({type:"PUBLISH_POST"}),e({type:"CLEAR_POST_FIELD"}))},m=Object(n.useCallback)((function(){c()||e({type:"UPLOAD_POSTS"})}),[c,e]);return Object(n.useEffect)((function(){c()||0!==a.uploadedPosts.length||m()}),[c,a.uploadedPosts,m]),Object(n.useEffect)((function(){c()||e({type:"UPLOAD_PROFILE_AVATAR_URL",nickName:t.nickName})}),[c,e,t.nickName]),Object(n.useEffect)((function(){null!==t.responseMessage&&void 0!==t.responseMessage?(u.current.setAttribute("placeholder",t.responseMessage),u.current.classList.add("warning")):(u.current.setAttribute("placeholder","\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u0441\u0442"),u.current.classList.remove("warning"))}),[t.responseMessage]),Object(n.useEffect)((function(){P(),window.addEventListener("click",(function(e){e.target!==u.current&&u.current&&u.current.classList.remove("focus")})),window.addEventListener("scroll",(function(e){s.current&&window.pageYOffset>=s.current.offsetTop-1e3&&window.pageYOffset>l&&(c()||(m(),l=window.pageYOffset))}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("title",null,"\u041f\u043e\u0441\u0442\u044b"),r.a.createElement("div",{className:"wrapper"},r.a.createElement(M,null),r.a.createElement("div",{className:"posts-body"},r.a.createElement("form",{onSubmit:i,className:"posts-body__form"},r.a.createElement("textarea",{className:"posts-body__textarea",ref:u,rows:"1",maxLength:400,placeholder:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u0441\u0442...",onChange:function(t){e({type:"CHANGE_NEW_POST",payload:t.target.value}),e({type:"CHECK_NEW_POSTS"})},onKeyDown:function(e){13===e.keyCode&&i(e)},onFocus:function(e){e.target.classList.add("focus")},value:a.postField}),r.a.createElement("button",{className:"posts-body__frame btn",type:"submit"},r.a.createElement("i",{className:"fas fa-plus"}))),a.loading?r.a.createElement("div",{className:"loading-frame posts-body__loading-frame"},r.a.createElement("i",{className:"loading-frame__item fas fa-sync-alt"})):null,r.a.createElement(C,{uploadedPosts:a.uploadedPosts}),r.a.createElement("div",{ref:s,className:"posts-body__breakpoint"}))))}function F(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.authReducer})),a=Object(n.useRef)(null),c=Object(n.useRef)(null),s=Object(n.useRef)(null),u=function(){var a=Object(_.a)(b.a.mark((function a(n){return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n.preventDefault(),e({type:"REGISTRATION",body:t.formInputs});case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),l=function(){var t=Object(_.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(h(a.target.name,a.target.value));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i=function(){var t=Object(_.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e({type:"CLEAR_ALL_INPUTS"}),e(g());case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),m=Object(n.useCallback)((function(){return""!==t.formInputs.nickName&&""!==t.formInputs.password}),[t.formInputs.nickName,t.formInputs.password]);return Object(n.useEffect)((function(){m()?(e({type:"SET_SUBMIT_ENABLED"}),s.current.classList.add("active")):(e({type:"SET_SUBMIT_DISABLED"}),s.current.classList.remove("active"))}),[t.formInputs,m,e]),Object(n.useEffect)((function(){t.warnings.nickName?(e(N("nickName")),a.current.setAttribute("placeholder","\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 \u043d\u0438\u043a\u0430 4 \u0441\u0438\u043c\u0432\u043e\u043b\u0430"),a.current.classList.add("warning")):(a.current.setAttribute("placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0438\u043a"),a.current.classList.remove("warning")),t.warnings.password?(e(N("password")),c.current.setAttribute("placeholder","\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 \u043f\u0430\u0440\u043e\u043b\u044f 6 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),c.current.classList.add("warning")):(c.current.setAttribute("placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"),c.current.classList.remove("warning"))}),[t.warnings,e]),Object(n.useEffect)((function(){switch(t.responseMessage){case"\u0422\u0430\u043a\u043e\u0439 \u043d\u0438\u043a \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d":e(N("nickName")),a.current.setAttribute("placeholder","".concat(t.responseMessage)),a.current.classList.add("warning");break;default:a.current.setAttribute("placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0438\u043a"),a.current.classList.remove("warning")}}),[t.responseMessage,e]),r.a.createElement(r.a.Fragment,null,r.a.createElement("title",null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"auth"},r.a.createElement(O,null),r.a.createElement("div",{className:"auth__container container"},r.a.createElement("div",{className:"auth__body"},r.a.createElement("img",{className:"auth__body-image",src:E+"/auth-picture.svg",alt:"\u041a\u0443\u0447\u0430 \u043b\u044e\u0434\u0435\u0439"}),r.a.createElement("div",{className:"auth__fields"},r.a.createElement("form",{className:"auth__form"},r.a.createElement("div",{className:"auth__header"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),"\u041e\u0448\u0438\u0431\u043a\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435"===t.responseMessage?r.a.createElement("div",null,t.responseMessage):null,r.a.createElement("input",{className:"auth__input",ref:a,type:"text",name:"nickName",onChange:l,autoComplete:"off",value:t.formInputs.nickName,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0438\u043a"}),r.a.createElement("input",{className:"auth__input",ref:c,type:"password",name:"password",onChange:l,autoComplete:"off",value:t.formInputs.password,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"}),r.a.createElement("div",{className:"auth__buttons"},r.a.createElement("button",{className:"auth__button",ref:s,type:"submit",onClick:u,disabled:t.submitButton},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.a.createElement(f.b,{to:"/authorization",className:"auth__button reg",onClick:i},"\u0412\u0445\u043e\u0434")))))),r.a.createElement(v,null))),r.a.createElement("div",{className:"auth-container"},r.a.createElement("form",{className:"auth-column"},t.responseMessage?r.a.createElement("div",{className:"auth-warn"},t.responseMessage):null,t.warnings.nickName?r.a.createElement("label",{htmlFor:"nick",className:"auth-warn"},"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 \u043d\u0438\u043a\u0430 4 \u0441\u0438\u043c\u0432\u043e\u043b\u0430"):null,t.warnings.email?r.a.createElement("label",{htmlFor:"nick",className:"auth-warn"},"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u0443\u044e \u043f\u043e\u0447\u0442\u0443"):null,t.warnings.password?r.a.createElement("label",{htmlFor:"nick",className:"auth-warn"},"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 \u043f\u0430\u0440\u043e\u043b\u044f 6 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"):null)))}var G=function(e){return{type:"SET_CURRENT_PROFILE_AVATAR_URL",newAvatarUrl:e}};function B(){var e=Object(o.c)((function(e){return e.profileReducer})),t=Object(o.c)((function(e){return e.postsReducer})),a=Object(o.c)((function(e){return e.authReducer})),c=Object(o.b)(),s=Object(p.g)().id,u=R(),l=Object(n.useRef)(),i=Object(n.useRef)(),m=Object(n.useRef)(),f=Object(n.useState)("profile__file-wrapper"),d=Object(L.a)(f,2),E=d[0],O=d[1],v=Object(n.useCallback)((function(){c({type:"UPLOAD_PROFILE_AVATAR_URL",nickName:s})}),[c,s]),h=function(e){e.stopPropagation(),e.preventDefault(),g(e),l.current.files=e.dataTransfer.files,i.current.innerText=l.current.files[0].name},N=function(){var t=Object(_.a)(b.a.mark((function t(n){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),(r=new FormData(n.target)).append("nickName","".concat(a.nickName)),r.append("previousAvatarUrl",e.currentProfileAvatarUrl),u()||c({type:"SEND_AVATAR_IMAGE",form:r}),i.current.innerText="\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044e";case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),j=function(){m.current&&m.current.classList.add("active")},g=function(e){m.current&&m.current.classList.remove("active")};return Object(n.useEffect)((function(){u()||(c({type:"SET_FILE_INPUT",ref:l.current}),v(),P())}),[u,c,v,e.currentProfileAvatarUrl]),Object(n.useEffect)((function(){null!==a.responseMessage&&void 0!==a.responseMessage?(i.current.innerText="".concat(a.responseMessage),O("profile__file-wrapper warning")):(i.current.innerText="\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044e",O("profile__file-wrapper"))}),[a.responseMessage]),Object(n.useEffect)((function(){window.addEventListener("dragover",(function(e){e.stopPropagation(),e.preventDefault()})),window.addEventListener("dragenter",j),window.addEventListener("drop",h)}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("title",null,"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"),r.a.createElement(M,null),r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"profile"},r.a.createElement("div",{ref:m,className:"profile__drop-area"},r.a.createElement("div",{onDragLeave:g,className:"profile__drag-checker"}),r.a.createElement("div",{className:"profile__drop-box"},r.a.createElement("i",{className:"profile__drop-ico fas fa-download"}),r.a.createElement("div",{className:"profile__drop-header"},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044e"))),r.a.createElement("div",{className:"profile__container"},t.loading?r.a.createElement("div",{className:"loading-frame"},r.a.createElement("i",{className:"loading-frame__item fas fa-sync-alt"})):null,r.a.createElement("div",{className:"profile__avatar ibg"},r.a.createElement("img",{src:e.currentProfileAvatarUrl,alt:"\u0430\u0432\u0430\u0442\u0430\u0440\u043a\u0430"})),a.nickName===s?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"profile__header"},"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044e \u043f\u0440\u043e\u0444\u0438\u043b\u044f:"),r.a.createElement("form",{onSubmit:N,className:"profile__form",name:"form",encType:"multipart/form-data",action:"/api/profile/load-avatar",method:"post",placeholder:"none"},r.a.createElement("div",{className:E},r.a.createElement("input",{onChange:function(e){i.current.innerText=e.target.files[0].name},type:"file",accept:"image/jpeg,image/png,image/webp",name:"avatar",id:"avatar",ref:l,className:"profile__file"}),r.a.createElement("label",{htmlFor:"avatar",onDrop:h,className:"profile__file-btn"},r.a.createElement("i",{className:"profile__file-ico fas fa-download"}),r.a.createElement("span",{ref:i,className:"profile__file-text"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044e"))),r.a.createElement("button",{className:"profile__submit-btn",type:"submit"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))):null))))}function H(){return r.a.createElement(r.a.Fragment,null,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438")}function W(){return Object(o.c)((function(e){return e.authReducer.authorized}))?r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/posts"},r.a.createElement(D,null)),r.a.createElement(p.b,{path:"/profile/:id"},r.a.createElement(B,null)),r.a.createElement(p.b,{path:"/settings"},r.a.createElement(H,null)),r.a.createElement(p.b,{path:"/"},r.a.createElement(p.a,{to:"/posts"}))):r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/auth"},r.a.createElement(A,null)),r.a.createElement(p.b,{path:"/registration"},r.a.createElement(F,null)),r.a.createElement(p.b,{path:"/"},r.a.createElement(p.a,{to:"/auth"})))}function V(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,null,r.a.createElement(W,null)))}var J=a(29),K=a(2),Y={formInputs:{nickName:"",password:""},warnings:{nickName:!1,password:!1},submitButton:"disabled",responseMessage:null,authorized:!1,token:null,nickName:null,avatarUrl:null};var z={postField:"",uploadedPosts:[],loading:!1};var Q={fileInputRef:null,currentProfileAvatarUrl:null};var q={responseMessage:"",loading:!0};var X=Object(u.combineReducers)({authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_INPUT":return Object(K.a)(Object(K.a)({},e),{},{formInputs:Object(K.a)(Object(K.a)({},e.formInputs),{},Object(J.a)({},t.name,t.value))});case"CLEAR_INPUT":return Object(K.a)(Object(K.a)({},e),{},{formInputs:Object(K.a)(Object(K.a)({},e.formInputs),{},Object(J.a)({},t.name,""))});case"CLEAR_ALL_INPUTS":return Object(K.a)(Object(K.a)({},e),{},{formInputs:Object(K.a)(Object(K.a)({},e.formInputs),{},{nickName:"",email:"",password:""})});case"CLEAR_PASSWORD_INPUT":return Object(K.a)(Object(K.a)({},e),{},{formInputs:Object(K.a)(Object(K.a)({},e.formInputs),{},{password:""})});case"SET_ON_WARNING":return Object(K.a)(Object(K.a)({},e),{},{warnings:Object(K.a)(Object(K.a)({},e.warnings),{},Object(J.a)({},t.name,!0))});case"SET_OFF_WARNING":return Object(K.a)(Object(K.a)({},e),{},{warnings:Object(K.a)(Object(K.a)({},e.warnings),{},Object(J.a)({},t.name,!1))});case"SET_SUBMIT_ENABLED":return Object(K.a)(Object(K.a)({},e),{},{submitButton:null});case"SET_SUBMIT_DISABLED":return Object(K.a)(Object(K.a)({},e),{},{submitButton:"disabled"});case"SET_MESSAGE":return Object(K.a)(Object(K.a)({},e),{},{responseMessage:t.message});case"CLEAR_MESSAGE":return Object(K.a)(Object(K.a)({},e),{},{responseMessage:null});case"LOGIN_USER":return Object(K.a)(Object(K.a)({},e),{},{token:t.token,nickName:t.nickName,avatarUrl:t.avatarUrl});case"LOGOUT_USER":return Object(K.a)(Object(K.a)({},e),{},{token:null,userId:null});case"IS_AUTH_TRUE":return Object(K.a)(Object(K.a)({},e),{},{authorized:!0});case"IS_AUTH_FALSE":return Object(K.a)(Object(K.a)({},e),{},{authorized:!1});case"SET_AVATAR_URL":return Object(K.a)(Object(K.a)({},e),{},{avatarUrl:t.newAvatarUrl});default:return e}},postsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_NEW_POST":return Object(K.a)(Object(K.a)({},e),{},{postField:t.payload});case"CLEAR_POST_FIELD":return Object(K.a)(Object(K.a)({},e),{},{postField:""});case"UPDATE_POST_LIST":return Object(K.a)(Object(K.a)({},e),{},{uploadedPosts:[].concat(Object(T.a)(e.uploadedPosts),Object(T.a)(t.payload))});case"CLEAR_POST_LIST":return Object(K.a)(Object(K.a)({},e),{},{uploadedPosts:[]});case"SET_LOADING_TRUE":return Object(K.a)(Object(K.a)({},e),{},{loading:!0});case"SET_LOADING_FALSE":return Object(K.a)(Object(K.a)({},e),{},{loading:!1});default:return e}},profileReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FILE_INPUT":return Object(K.a)(Object(K.a)({},e),{},{fileInputRef:t.ref});case"SET_CURRENT_PROFILE_AVATAR_URL":return Object(K.a)(Object(K.a)({},e),{},{currentProfileAvatarUrl:t.newAvatarUrl});default:return e}},appReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;return t.type,e}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Z=a(3),$=function(){var e=Object(_.a)(b.a.mark((function e(t){var a,n,r,c,s,o,u,l,i,m,f=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=f.length>1&&void 0!==f[1]?f[1]:"GET",n=f.length>2&&void 0!==f[2]?f[2]:null,r=f.length>3&&void 0!==f[3]?f[3]:null,"GET"!==a){e.next=19;break}return e.prev=4,e.next=7,fetch(t);case 7:return c=e.sent,e.next=10,c.json();case 10:return s=e.sent,e.abrupt("return",s);case 14:throw e.prev=14,e.t0=e.catch(4),e.t0;case 17:e.next=66;break;case 19:if("POST"!==a||null!==r){e.next=37;break}return e.prev=20,n=JSON.stringify(n),r={"Content-Type":"application/json"},e.next=25,fetch(t,{method:a,body:n,headers:r});case 25:return o=e.sent,e.next=28,o.json();case 28:return u=e.sent,e.abrupt("return",u);case 32:throw e.prev=32,e.t1=e.catch(20),e.t1;case 35:e.next=66;break;case 37:if("POST"!==a||null===r){e.next=53;break}return e.prev=38,e.next=41,fetch(t,{method:a,body:n,headers:r});case 41:return l=e.sent,e.next=44,l.json();case 44:return i=e.sent,e.abrupt("return",i);case 48:throw e.prev=48,e.t2=e.catch(38),e.t2;case 51:e.next=66;break;case 53:if("PATCH"!==a||null!==r){e.next=66;break}return e.prev=54,n=JSON.stringify(n),r={"Content-Type":"application/json"},e.next=59,fetch(t,{method:a,body:n,headers:r});case 59:return m=e.sent,e.abrupt("return",m);case 63:throw e.prev=63,e.t3=e.catch(54),e.t3;case 66:case"end":return e.stop()}}),e,null,[[4,14],[20,32],[38,48],[54,63]])})));return function(t){return e.apply(this,arguments)}}(),ee=b.a.mark(ae),te=b.a.mark(ne);function ae(e){var t,a,n,r;return b.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,Object(Z.a)($,"/api/auth/registration","POST",e.body);case 3:if(!(t=c.sent).ok){c.next=18;break}return c.next=7,Object(Z.c)((function(e){return e.authReducer}));case 7:return a=c.sent,n={nickName:a.formInputs.nickName,password:a.formInputs.password},c.next=11,Object(Z.b)({type:"LOGIN",body:n});case 11:return c.next=13,Object(Z.b)({type:"CLEAR_ALL_INPUTS"});case 13:if(!t.message){c.next=16;break}return c.next=16,Object(Z.b)(j(t.message));case 16:c.next=31;break;case 18:if(!t.fault){c.next=28;break}r=0;case 20:if(!(r<t.fault.length)){c.next=26;break}return c.next=23,Object(Z.b)(k(t.fault[r].param));case 23:r++,c.next=20;break;case 26:c.next=31;break;case 28:if(!t.message){c.next=31;break}return c.next=31,Object(Z.b)(j(t.message));case 31:c.next=36;break;case 33:throw c.prev=33,c.t0=c.catch(0),c.t0;case 36:case"end":return c.stop()}}),ee,null,[[0,33]])}function ne(e){var t;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(Z.a)($,"/api/auth/login","POST",e.body);case 3:if(!(t=a.sent).ok){a.next=11;break}return a.next=7,Object(Z.b)(y(t.token,t.nickName));case 7:return a.next=9,Object(Z.b)({type:"CLEAR_ALL_INPUTS"});case 9:a.next=18;break;case 11:if("password"!==t.incorrectField){a.next=16;break}return a.next=14,Object(Z.b)({type:"CLEAR_PASSWORD_INPUT"});case 14:a.next=18;break;case 16:return a.next=18,Object(Z.b)(N("nickName"));case 18:return a.next=20,Object(Z.b)(j(t.message));case 20:a.next=25;break;case 22:throw a.prev=22,a.t0=a.catch(0),a.t0;case 25:case"end":return a.stop()}}),te,null,[[0,22]])}var re=b.a.mark(ue),ce=b.a.mark(le),se=b.a.mark(ie),oe=b.a.mark(me);function ue(){var e,t,a,n,r,c;return b.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,Object(Z.c)((function(e){return e.postsReducer}));case 3:return e=s.sent,s.next=6,Object(Z.c)((function(e){return e.authReducer}));case 6:return t=s.sent,a=Date.now(),n={text:e.postField,date:a,avatarUrl:t.avatarUrl,author:t.nickName},s.next=11,Object(Z.a)($,"/api/posts/create","POST",n);case 11:if(!s.sent.ok){s.next=26;break}return s.next=15,Object(Z.c)((function(e){return e.authReducer.nickName}));case 15:return r=s.sent,n={nickName:r,loadedPostsQuantity:0},s.next=19,Object(Z.a)($,"/api/posts/upload","POST",n);case 19:return c=s.sent,s.next=22,Object(Z.b)({type:"CLEAR_POST_LIST"});case 22:return s.next=24,Object(Z.b)(S(c));case 24:s.next=26;break;case 26:s.next=30;break;case 28:s.prev=28,s.t0=s.catch(0);case 30:case"end":return s.stop()}}),re,null,[[0,28]])}function le(){var e,t,a,n;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(Z.b)({type:"SET_LOADING_TRUE"});case 2:return r.prev=2,r.next=5,Object(Z.c)((function(e){return e.postsReducer}));case 5:return e=r.sent,r.next=8,Object(Z.c)((function(e){return e.authReducer.nickName}));case 8:return t=r.sent,a={nickName:t,loadedPostsQuantity:e.uploadedPosts.length},r.next=12,Object(Z.a)($,"/api/posts/upload","POST",a);case 12:return n=r.sent,r.next=15,Object(Z.b)(S(n));case 15:r.next=20;break;case 17:r.prev=17,r.t0=r.catch(2),console.log(r.t0.name);case 20:return r.next=22,Object(Z.b)({type:"SET_LOADING_FALSE"});case 22:case"end":return r.stop()}}),ce,null,[[2,17]])}function ie(e){var t;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t={postId:e.postId,newLikes:e.newLikes},a.next=4,Object(Z.a)($,"/api/posts/like","PATCH",t);case 4:a.sent.ok,a.next=10;break;case 8:a.prev=8,a.t0=a.catch(0);case 10:case"end":return a.stop()}}),se,null,[[0,8]])}function me(){var e,t,a,n,r;return b.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,Object(Z.c)((function(e){return e.postsReducer.uploadedPosts[0]._id}));case 3:return e=c.sent,c.next=6,Object(Z.c)((function(e){return e.authReducer.nickName}));case 6:return t=c.sent,c.next=9,Object(Z.a)($,"/api/posts/check-new-posts");case 9:if(a=c.sent,!e||e===a.latestPostId){c.next=19;break}return n={nickName:t,loadedPostsQuantity:0},c.next=14,Object(Z.a)($,"/api/posts/upload","POST",n);case 14:return r=c.sent,c.next=17,Object(Z.b)({type:"CLEAR_POST_LIST"});case 17:return c.next=19,Object(Z.b)(S(r));case 19:c.next=23;break;case 21:c.prev=21,c.t0=c.catch(0);case 23:case"end":return c.stop()}}),oe,null,[[0,21]])}var fe=b.a.mark(de),pe=b.a.mark(be);function de(e){var t,a,n,r,c;return b.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(Z.b)({type:"SET_LOADING_TRUE"});case 2:return s.next=4,Object(Z.c)((function(e){return e.profileReducer.fileInputRef}));case 4:return t=s.sent,s.next=7,Object(Z.c)((function(e){return e.authReducer.nickName}));case 7:return a=s.sent,s.prev=8,s.next=11,Object(Z.a)($,"/api/profile/load-avatar","POST",e.form,{});case 11:if(!(n=s.sent).ok){s.next=25;break}return s.next=15,Object(Z.b)({type:"UPLOAD_PROFILE_AVATAR_URL",nickName:a});case 15:return r={loadedPostsQuantity:0},s.next=18,Object(Z.a)($,"/api/posts/upload","POST",r);case 18:return c=s.sent,s.next=21,Object(Z.b)({type:"CLEAR_POST_LIST"});case 21:return s.next=23,Object(Z.b)(S(c));case 23:s.next=27;break;case 25:return s.next=27,Object(Z.b)(j(n.message));case 27:s.next=32;break;case 29:throw s.prev=29,s.t0=s.catch(8),s.t0;case 32:return t.value=null,s.next=35,Object(Z.b)({type:"SET_LOADING_FALSE"});case 35:case"end":return s.stop()}}),fe,null,[[8,29]])}function be(e){var t,a;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t={nickName:e.nickName},n.next=4,Object(Z.a)($,"/api/profile/avatar-url","POST",t);case 4:if(!(a=n.sent).ok){n.next=16;break}return n.next=8,Object(Z.c)((function(e){return e.authReducer.nickName}));case 8:if(n.sent!==e.nickName){n.next=12;break}return n.next=12,Object(Z.b)({type:"SET_AVATAR_URL",newAvatarUrl:a.avatarUrl});case 12:return n.next=14,Object(Z.b)(G(a.avatarUrl));case 14:n.next=16;break;case 16:n.next=21;break;case 18:throw n.prev=18,n.t0=n.catch(0),n.t0;case 21:case"end":return n.stop()}}),pe,null,[[0,18]])}var _e=b.a.mark(Ee);function Ee(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Z.d)("REGISTRATION",ae);case 2:return e.next=4,Object(Z.d)("LOGIN",ne);case 4:return e.next=6,Object(Z.d)("PUBLISH_POST",ue);case 6:return e.next=8,Object(Z.d)("UPLOAD_POSTS",le);case 8:return e.next=10,Object(Z.d)("SEND_AVATAR_IMAGE",de);case 10:return e.next=12,Object(Z.d)("UPLOAD_PROFILE_AVATAR_URL",be);case 12:return e.next=14,Object(Z.d)("LIKE_CHANGING",ie);case 14:return e.next=16,Object(Z.d)("CHECK_NEW_POSTS",me);case 16:case"end":return e.stop()}}),_e)}var Oe=Object(m.a)(),ve=Object(u.createStore)(X,Object(l.composeWithDevTools)(Object(u.applyMiddleware)(i.a,Oe)));Oe.run(Ee),s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{store:ve},r.a.createElement(V,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[147,1,2]]]);
//# sourceMappingURL=main.52c3d3f3.chunk.js.map